<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>WeeClick –ü—Ä–æ—Ñ—ñ–ª—å</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --brand-color: #0094FE;
            --brand-color-hover: #007acd;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5;
            color: #1a202c;
            overflow: hidden;
        }
        /* --- –°—Ç–∏–ª—ñ –¥–ª—è –µ–∫—Ä–∞–Ω—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ç–∞ –∞–Ω—ñ–º–∞—Ü—ñ—ó --- */
        #loader-screen {
            background-color: #ffffff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        #animated-logo {
            font-size: 3.5rem; /* 56px */
            font-weight: 900;
            color: var(--brand-color);
            display: inline-block;
            overflow: hidden;
            white-space: nowrap;
            border-right: .15em solid var(--brand-color);
            letter-spacing: .1em;
            animation: 
                typing 2s steps(8, end),
                blink-caret .75s step-end infinite;
        }
        /* –ê–Ω—ñ–º–∞—Ü—ñ—è –¥—Ä—É–∫—É–≤–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É */
        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }
        /* –ê–Ω—ñ–º–∞—Ü—ñ—è –±–ª–∏–º–∞–Ω–Ω—è –∫—É—Ä—Å–æ—Ä–∞ */
        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: var(--brand-color); }
        }

        #progress-bar-container {
            width: 80%;
            max-width: 300px;
            height: 8px;
            background-color: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 2rem; /* –í—ñ–¥—Å—Ç—É–ø –≤—ñ–¥ –ª–æ–≥–æ—Ç–∏–ø–∞ */
        }
        #progress-bar {
            width: 0%;
            height: 100%;
            background-color: var(--brand-color);
            transition: width 0.1s linear;
        }
        /* --- –Ü–Ω—à—ñ —Å—Ç–∏–ª—ñ --- */
        #ton-connect-placeholder .tc-button {
            background-color: var(--brand-color) !important;
            color: white !important;
            width: 100%;
            border-radius: 12px !important;
            font-weight: 600 !important;
            transition: background-color 0.2s;
        }
        #ton-connect-placeholder .tc-button:hover {
            background-color: var(--brand-color-hover) !important;
        }
        .premium-badge {
             background: linear-gradient(135deg, #6B49F7 0%, #D856F2 100%);
        }
    </style>
</head>
<body class="w-full h-screen">

    <!-- 1. –ï–∫—Ä–∞–Ω –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑ –∞–Ω—ñ–º–æ–≤–∞–Ω–∏–º –ª–æ–≥–æ -->
    <div id="loader-screen" class="w-full h-full fixed top-0 left-0 z-50">
        <div id="animated-logo">WeeClick</div>
        <div id="progress-bar-container">
            <div id="progress-bar"></div>
        </div>
        <p id="loading-status" class="mt-4 text-gray-500 text-sm">–Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è...</p>
    </div>

    <!-- 2. –û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç (–ø—Ä–æ—Ñ—ñ–ª—å) -->
    <div id="main-content" class="w-full h-full p-4 hidden overflow-y-auto">
        <div class="w-full max-w-md mx-auto bg-white rounded-2xl shadow-lg p-6 space-y-5">
            
            <div class="flex items-center space-x-4">
                <img id="user-photo" src="https://placehold.co/128x128/E0E0E0/BDBDBD?text=?" alt="–ê–≤–∞—Ç–∞—Ä" 
                     class="w-16 h-16 rounded-full border-2 border-gray-200 object-cover">
                <div>
                    <h1 id="user-name" class="text-xl font-bold text-gray-800">–Ü–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</h1>
                    <p id="user-username" class="text-sm text-gray-500">@username</p>
                </div>
            </div>

            <div>
                <h2 class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2">–î–µ—Ç–∞–ª—ñ –ø—Ä–æ—Ñ—ñ–ª—é</h2>
                <div class="space-y-2 text-sm bg-gray-50 p-3 rounded-lg">
                    <div class="flex justify-between">
                        <span class="text-gray-500">User ID:</span>
                        <span id="user-id" class="font-mono bg-gray-200 px-2 py-0.5 rounded"></span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-500">–ú–æ–≤–∞:</span>
                        <span id="user-lang" class="font-medium"></span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-500">–°—Ç–∞—Ç—É—Å:</span>
                        <span id="user-premium" class="font-semibold"></span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-500">–¢–∏–ø –∞–∫–∞—É–Ω—Ç—É:</span>
                        <span id="user-is-bot" class="font-semibold"></span>
                    </div>
                </div>
            </div>

            <div id="wallet-info" class="pt-4 border-t border-gray-100 hidden">
                 <h2 class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2">–ü—ñ–¥–∫–ª—é—á–µ–Ω–∏–π –≥–∞–º–∞–Ω–µ—Ü—å</h2>
                 <p id="wallet-address" class="text-sm font-mono text-center bg-blue-50 text-blue-700 p-2 rounded-lg break-all"></p>
            </div>

            <div id="ton-connect-placeholder" class="pt-2"></div>
        </div>
    </div>

    <script type="module">
        // --- –ï–ª–µ–º–µ–Ω—Ç–∏ DOM ---
        const loaderScreen = document.getElementById('loader-screen');
        const progressBar = document.getElementById('progress-bar');
        const loadingStatus = document.getElementById('loading-status');
        const mainContent = document.getElementById('main-content');
        
        const userPhoto = document.getElementById('user-photo');
        const userName = document.getElementById('user-name');
        const userUsername = document.getElementById('user-username');
        const userId = document.getElementById('user-id');
        const userLang = document.getElementById('user-lang');
        const userPremium = document.getElementById('user-premium');
        const userIsBot = document.getElementById('user-is-bot');

        const walletInfoDiv = document.getElementById('wallet-info');
        const walletAddressP = document.getElementById('wallet-address');

        // --- –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è Telegram Web App ---
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();

        // --- –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è TON Connect –∑ –≤–∞—à–∏–º –º–∞–Ω—ñ—Ñ–µ—Å—Ç–æ–º ---
        const tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
            manifestUrl: 'https://weebwe.github.io/WeeClick/manifest.json',
            buttonRootId: 'ton-connect-placeholder'
        });

        // --- –§—É–Ω–∫—Ü—ñ—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è UI –≥–∞–º–∞–Ω—Ü—è ---
        function updateWalletUI(wallet) {
            if (wallet) {
                const friendlyAddress = TON_CONNECT_UI.toUserFriendlyAddress(wallet.account.address, wallet.account.chain === '-3');
                walletAddressP.textContent = friendlyAddress;
                walletInfoDiv.classList.remove('hidden');
            } else {
                walletInfoDiv.classList.add('hidden');
                walletAddressP.textContent = '';
            }
        }
        tonConnectUI.onStatusChange(updateWalletUI);

        // --- –õ–æ–≥—ñ–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è ---
        function startLoading() {
            let progress = 0;
            const interval = setInterval(() => {
                progress += 1;
                progressBar.style.width = progress + '%';
                if (progress >= 20) loadingStatus.textContent = '–û—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö Telegram...';
                if (progress >= 50) loadingStatus.textContent = '–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É...';
                if (progress >= 80) loadingStatus.textContent = '–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è...';
                if (progress >= 100) {
                    clearInterval(interval);
                    loadUserData();
                }
            }, 25); // –¢—Ä–æ—Ö–∏ –ø–æ–≤—ñ–ª—å–Ω—ñ—à–µ, —â–æ–± –∞–Ω—ñ–º–∞—Ü—ñ—è –ª–æ–≥–æ—Ç–∏–ø–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å
        }

        function loadUserData() {
            const user = tg.initDataUnsafe?.user;

            if (user) {
                userName.textContent = `${user.first_name || ''} ${user.last_name || ''}`.trim();
                userUsername.textContent = user.username ? `@${user.username}` : '–ù—ñ–∫–Ω–µ–π–º –Ω–µ –≤–∫–∞–∑–∞–Ω–æ';
                userId.textContent = user.id;
                userLang.textContent = user.language_code ? user.language_code.toUpperCase() : 'N/A';
                
                if (user.photo_url) {
                    userPhoto.src = user.photo_url;
                }
                
                if (user.is_premium) {
                    userPremium.innerHTML = `<span class="premium-badge text-white text-xs font-bold px-2 py-1 rounded-full">Premium</span>`;
                } else {
                    userPremium.textContent = '–°—Ç–∞–Ω–¥–∞—Ä—Ç';
                }

                if (user.is_bot) {
                    userIsBot.textContent = 'ü§ñ –ë–æ—Ç';
                    userIsBot.classList.add('text-red-500');
                } else {
                    userIsBot.textContent = 'üë§ –õ—é–¥–∏–Ω–∞';
                    userIsBot.classList.add('text-green-500');
                }

            } else {
                // –ó–∞–ø–∞—Å–Ω—ñ –¥–∞–Ω—ñ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
                userName.textContent = "WeeClick User";
                userUsername.textContent = "@testuser";
                userId.textContent = "123456789";
                userLang.textContent = "UK";
                userPremium.textContent = "–°—Ç–∞–Ω–¥–∞—Ä—Ç";
                userIsBot.textContent = 'üë§ –õ—é–¥–∏–Ω–∞';
                userIsBot.classList.add('text-green-500');
                console.warn("–î–∞–Ω—ñ Telegram –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è —Ç–µ—Å—Ç–æ–≤—ñ.");
            }

            updateWalletUI(tonConnectUI.wallet);
            
            loaderScreen.style.display = 'none';
            mainContent.classList.remove('hidden');
        }

        window.addEventListener('load', startLoading);
    </script>
</body>
</html>

